(this["webpackJsonpmusic-panel"]=this["webpackJsonpmusic-panel"]||[]).push([[0],{150:function(e,t,n){"use strict";n.r(t);var c,r=n(1),a=n.n(r),s=n(65),i=n.n(s),o=(n(78),n(4)),u=n(8),l=(n(79),n(66)),j=n(67),d=n(73),m=n(72),b=n(3),g=n.n(b),f=n(23),p=n(6),h=n(2),O=n(21),v=n(0),x=function(e){var t=e.isLocalPlaying;return Object(v.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:t?"play-icon playing":"play-icon",viewBox:"0 0 512 512",xmlSpace:"preserve",children:[Object(v.jsx)("g",{children:Object(v.jsx)("g",{children:Object(v.jsxs)("g",{children:[Object(v.jsx)("path",{d:"M256,0C114.833,0,0,114.844,0,256s114.833,256,256,256s256-114.844,256-256S397.167,0,256,0z M256,490.667\r C126.604,490.667,21.333,385.396,21.333,256S126.604,21.333,256,21.333S490.667,126.604,490.667,256S385.396,490.667,256,490.667\r z"}),Object(v.jsx)("path",{d:"M357.771,247.031l-149.333-96c-3.271-2.135-7.5-2.25-10.875-0.396C194.125,152.51,192,156.094,192,160v192\r c0,3.906,2.125,7.49,5.563,9.365c1.583,0.865,3.354,1.302,5.104,1.302c2,0,4.021-0.563,5.771-1.698l149.333-96\r c3.042-1.958,4.896-5.344,4.896-8.969S360.813,248.99,357.771,247.031z M213.333,332.458V179.542L332.271,256L213.333,332.458z"})]})})}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{})]})},w=function(e){var t=e.isLocalPlaying;return Object(v.jsx)("svg",{className:t?"stop-icon":"stop-icon stoping",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:Object(v.jsxs)("g",{children:[Object(v.jsx)("path",{d:"m256 512c-68.38 0-132.667-26.629-181.02-74.98-48.351-48.353-74.98-112.64-74.98-181.02s26.629-132.667 74.98-181.02c48.353-48.351 112.64-74.98 181.02-74.98s132.667 26.629 181.02 74.98c48.351 48.353 74.98 112.64 74.98 181.02s-26.629 132.667-74.98 181.02c-48.353 48.351-112.64 74.98-181.02 74.98zm0-482c-124.617 0-226 101.383-226 226s101.383 226 226 226 226-101.383 226-226-101.383-226-226-226z"}),Object(v.jsx)("g",{children:Object(v.jsx)("path",{d:"m356 371h-200c-8.284 0-15-6.716-15-15v-200c0-8.284 6.716-15 15-15h200c8.284 0 15 6.716 15 15v200c0 8.284-6.716 15-15 15zm-185-30h170v-170h-170z"})})]})})},y=function(){return Object(v.jsxs)("svg",{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",xmlSpace:"preserve",className:"move-to-icon",children:[Object(v.jsx)("g",{children:Object(v.jsx)("g",{children:Object(v.jsxs)("g",{children:[Object(v.jsx)("path",{d:"M508.271,194.568l-149.333-128c-3.146-2.708-7.583-3.323-11.396-1.594c-3.781,1.74-6.208,5.521-6.208,9.688v74.813\r c-119.188,3.313-176.688,62.312-204.021,112.031c-23.771,43.219-29.104,86.01-30.302,103.573\r c-0.229,2.688-0.344,5.427-0.344,8.219v0.031c0,0,0,0.01,0,0.021v0.01c0,0.01,0,0.01,0,0.01v0.031v0.01c0,0,0,0.01,0,0.021v0.01\r c0,0.01,0,0.021,0,0.021c0,0.01,0,0.01,0,0.01v0.031c0,0.01,0,0.021,0,0.031c0,0,0,0.01,0,0.031v0.01v0.021v0.01\r c0,0.01,0,0.021,0,0.031l0.01,0.031c0,0,0,0,0,0.01c0,0.021,0,0.031,0,0.031c0,0.01,0,0.021,0,0.031v0.031v0.031v0.01v0.031\r c0,0.01,0,0.021,0,0.031c0,0,0,0.021,0.01,0.031c0,0,0,0.01,0,0.031v0.01c0,0.01,0,0.021,0,0.031v0.031c0,0.01,0,0.021,0,0.031\r c-0.01,0.031,0.021,0.042,0.01,0.042v0.031c0,0.01,0,0.021,0,0.031v0.031c0,0.021,0.01,0.042,0.01,0.042v0.031\r c0,0.01,0,0.021,0,0.031v0.01v0.021v0.01l0.01,0.021v0.01c0,0.01,0,0.021,0,0.021c0,0.01,0,0.01,0,0.01v0.031v0.01\r c0.01,0.01,0.01,0.01,0.01,0.021c0,0,0,0.01,0,0.021v0.01c0,0.01,0,0.01,0,0.01v0.021c0.01,0.031,0.01,0.031,0.01,0.031\r c0,0.01,0,0.021,0,0.031v0.01v0.021v0.01c0.01,0.01,0.01,0.021,0.01,0.021c0,0.021,0,0.031,0,0.031\r c0.667,5.26,5.156,9.323,10.583,9.323c5.885,0,10.656-4.76,10.667-10.646v-0.01c0-0.542,0.01-1.865,0.104-3.885\r c4.656-88.698,168.521-108.823,213.229-112.667v73.875c0,4.167,2.427,7.948,6.208,9.688c3.802,1.729,8.229,1.125,11.396-1.594\r l149.333-128c2.365-2.021,3.729-4.979,3.729-8.094C512,199.547,510.635,196.589,508.271,194.568z M362.667,307.474v-62.146\r c0-2.917-1.188-5.698-3.302-7.708c-1.979-1.906-4.625-2.958-7.365-2.958c-0.156,0-0.323,0-0.49,0.01\r c-7.51,0.344-142.177,7.281-208.521,64.323c21.948-57.885,75.969-128.333,208.958-128.333H352c2.833,0,5.542-1.125,7.542-3.125\r s3.125-4.708,3.125-7.542V97.849l122.281,104.812L362.667,307.474z"}),Object(v.jsx)("path",{d:"M437.333,303.047c-5.896,0-10.667,4.771-10.667,10.667v91.615c0,11.76-9.573,21.333-21.333,21.333H42.667\r c-11.76,0-21.333-9.573-21.333-21.333V191.995c0-11.76,9.573-21.333,21.333-21.333h147.729c5.896,0,10.667-4.771,10.667-10.667\r s-4.771-10.667-10.667-10.667H42.667C19.135,149.329,0,168.464,0,191.995v213.333c0,23.531,19.135,42.667,42.667,42.667h362.667\r c23.531,0,42.667-19.135,42.667-42.667v-91.615C448,307.818,443.229,303.047,437.333,303.047z"})]})})}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{})]})},S=n(68),k=n.n(S),P={setup:function(){c=k()("/")},terminate:function(){c=null},on:function(e,t){c.on(e,t)},off:function(e,t){c.off(e,t)},emit:function(e,t){c.emit(e,t)},isSocketAvailable:function(){return c}};var N=function(e){var t=e.precentageChange,n=e.isPlaying,c=e.idx,a=e.isSubmitingProgram,s=e.setProgram,i=e.ActiveProgram,o=e.mainFaderVolume,u=Object(r.useState)(o),l=Object(h.a)(u,2),j=l[0],d=l[1],m=Object(r.useState)(null),b=Object(h.a)(m,2),g=b[0],p=b[1],S=Object(r.useState)(!0),k=Object(h.a)(S,2),N=k[0],C=k[1];return Object(r.useEffect)((function(){t&&function(){var e=100/t,n=j-j/e;n>100&&(n=100),0!==o?(d(0!==j||e?n:o/(100/Math.abs(e))),0===j&&d(o),p(j)):d(o)}()}),[t]),Object(r.useEffect)((function(){C(n)}),[n]),Object(r.useEffect)((function(){i&&function(){var e=i.program.find((function(e){return e.name===c}));d(e.value),P.emit("volume changed",{idx:c,inputValue:e.value})}()}),[i]),Object(r.useEffect)((function(){a&&s((function(e){return[].concat(Object(f.a)(e),[{name:c,value:j}])}))}),[a]),Object(r.useEffect)((function(){return P.setup(),P.on("new play status from player ".concat(c),(function(e){var t=e.playStatus;C(t)})),P.on("Active player in room ".concat(c),(function(e){var t=e.volume;d(100*t)})),P.emit("checking for active players on room",{idx:c}),function(){c&&P.isSocketAvailable()&&(P.off("new play status from player ".concat(c)),P.off("Active player in room ".concat(c)),P.terminate())}}),[]),Object(r.useEffect)((function(){g!==j&&g&&P.emit("volume changed",{idx:c,inputValue:j})}),[g]),Object(r.useEffect)((function(){P.emit("playing status",{idx:c,isLocalPlaying:N})}),[N]),Object(v.jsxs)("div",{className:"controller-preview",children:[Object(v.jsxs)("div",{className:"controller-info",children:[Object(v.jsx)("h1",{children:"Name"}),Object(v.jsx)("h1",{children:c})]}),Object(v.jsx)("i",{onClick:function(){C(!N)},children:Object(v.jsx)(x,{isLocalPlaying:N})}),Object(v.jsx)("i",{onClick:function(){C(!N)},children:Object(v.jsx)(w,{isLocalPlaying:N})}),Object(v.jsx)("input",{type:"range",min:"0",max:"100",value:j,onChange:function(e){!function(e){d(e.target.value),P.emit("volume changed",{idx:c,inputValue:e.target.value})}(e)}}),Object(v.jsx)(O.a,{to:"/player/".concat(c),children:Object(v.jsx)(y,{})})]})},C=function(e){var t=e.mainFaderVolume,n=e.oldMainFaderVolume,c=e.setMainFaderVolume,a=e.setOldMainFaderVolume,s=e.setPrecentageChange,i=e.isPlaying,o=e.setIsPlaying;return Object(r.useEffect)((function(){return P.setup(),P.on("main fader new volume",(function(e){var t=e.volume;c(t)})),function(){P.off("main fader new volume"),P.terminate()}}),[]),Object(v.jsxs)("div",{className:"main-fader",children:[Object(v.jsx)("h1",{children:"Master"}),Object(v.jsx)("i",{onClick:function(){o(!i)},children:Object(v.jsx)(x,{isLocalPlaying:i})}),Object(v.jsx)("i",{onClick:function(){o(!i)},children:Object(v.jsx)(w,{isLocalPlaying:i})}),Object(v.jsx)("input",{type:"range",value:t,onChange:function(e){!function(e){c(e.target.value),P.emit("main fader volume changed",{volume:e.target.value})}(e),function(e){var t,c,r=(t=n,c=e.target.value,(t-c)/t*100);s(r),a(e.target.value)}(e)}})]})},M=function(e){var t=e.setProgram,n=e.program,c=e.isSubmitingProgram,a=e.ActiveProgram,s=(e.updateActivePlayer,new Array(8).fill(null)),i=Object(r.useState)(100),o=Object(h.a)(i,2),u=o[0],l=o[1],j=Object(r.useState)(100),d=Object(h.a)(j,2),m=d[0],b=d[1],g=Object(r.useState)(null),f=Object(h.a)(g,2),p=f[0],O=f[1],x=Object(r.useState)(!0),w=Object(h.a)(x,2),y=w[0],S=w[1];return Object(v.jsxs)("div",{className:"controller-list",children:[Object(v.jsx)(C,{mainFaderVolume:u,oldMainFaderVolume:m,setMainFaderVolume:l,setOldMainFaderVolume:b,setPrecentageChange:O,precentageChange:p,isPlaying:y,setIsPlaying:S}),s.map((function(e,r){return Object(v.jsx)(N,{idx:r,mainFaderVolume:u,setOldMainFaderVolume:b,precentageChange:p,isPlaying:y,program:n,isSubmitingProgram:c,setProgram:t,ActiveProgram:a},r)}))]})},E=function(e){var t=e.program,n=e.handleSettingProgram,c=e.handleDeleteProgram;return Object(v.jsx)("div",{className:"program-preview",children:Object(v.jsxs)("div",{className:"program-details",children:[Object(v.jsxs)("h4",{className:"program-name",onClick:function(){return n(t)},children:[" ",t.programName]}),Object(v.jsx)("h4",{className:"x-mark",onClick:function(){return c(t)},children:"X"})]})})},z=function(){return Object(v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:[Object(v.jsxs)("rect",{x:"17.5",y:"30",width:"15",height:"40",fill:"#1d3f72",children:[Object(v.jsx)("animate",{attributeName:"y",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.5;1",values:"18;30;30",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.2s"}),Object(v.jsx)("animate",{attributeName:"height",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.5;1",values:"64;40;40",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.2s"})]}),Object(v.jsxs)("rect",{x:"42.5",y:"30",width:"15",height:"40",fill:"#5699d2",children:[Object(v.jsx)("animate",{attributeName:"y",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.5;1",values:"20.999999999999996;30;30",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.1s"}),Object(v.jsx)("animate",{attributeName:"height",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.5;1",values:"58.00000000000001;40;40",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.1s"})]}),Object(v.jsxs)("rect",{x:"67.5",y:"30",width:"15",height:"40",fill:"#d8ebf9",children:[Object(v.jsx)("animate",{attributeName:"y",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.5;1",values:"20.999999999999996;30;30",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1"}),Object(v.jsx)("animate",{attributeName:"height",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.5;1",values:"58.00000000000001;40;40",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1"})]})]})},D=function(e){var t=e.handleSubmit,n=e.setProgramName,c=e.programs,r=e.handleSettingProgram,a=e.handleDeleteProgram;return Object(v.jsxs)("div",{className:"programs",children:[Object(v.jsx)("h1",{children:"Programs"}),Object(v.jsxs)("form",{onSubmit:function(e){return t(e)},children:[Object(v.jsx)("input",{type:"text",placeholder:"program name",onChange:function(e){return n(e.target.value)}}),Object(v.jsx)("button",{children:"save program"})]}),c.length?c.map((function(e,t){return Object(v.jsx)(E,{program:e,handleDeleteProgram:a,handleSettingProgram:r},t)})):Object(v.jsx)(z,{})]})},L=n(70),T=n.n(L).a.create({withCredentials:!0}),V="/api/",_=function(e,t){return B(e,"GET",t)},F=function(e,t){return B(e,"POST",t)},I=function(e,t){return B(e,"PUT",t)},A=function(e,t){return B(e,"DELETE",t)};function B(e){return R.apply(this,arguments)}function R(){return(R=Object(p.a)(g.a.mark((function e(t){var n,c,r,a=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"get",c=a.length>2&&void 0!==a[2]?a[2]:null,e.prev=2,e.next=5,T({method:n,url:"".concat(V).concat(t),data:c});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:if(e.prev=9,e.t0=e.catch(2),401!==e.t0.response.status){e.next=13;break}return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var U=n(29),J=n.n(U);function H(){return(H=Object(p.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("in SERVICE ",t),t._id=J.a.makeId(),console.log(t),e.next=5,F("programs",t);case 5:return n=e.sent,console.log(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(p.a)(g.a.mark((function e(t){var n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id?I("room/".concat(t._id),t):F("room",t),e.next=3,n;case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(p.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("programs/".concat(t._id),t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q={getById:function(e){var t=new URLSearchParams;if(e){for(var n in e)e[n]&&t.set(n,e[n]);return _("room?".concat(t))}},save:function(e){return X.apply(this,arguments)},remove:function(e){return A("room/".concat(e))},addProgram:function(e){return H.apply(this,arguments)},getPrograms:function(e){var t=new URLSearchParams;if(e)for(var n in e)e[n]&&t.set(n,e[n]);return _("programs?".concat(t))},deleteProgram:function(e){return W.apply(this,arguments)}},G=function(){var e=Object(r.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(h.a)(a,2),i=s[0],o=s[1],u=Object(r.useState)([]),l=Object(h.a)(u,2),j=l[0],d=l[1],m=Object(r.useState)(!1),b=Object(h.a)(m,2),O=b[0],x=b[1],w=Object(r.useState)(null),y=Object(h.a)(w,2),S=y[0],k=y[1];return Object(r.useEffect)(Object(p.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.length){e.next=6;break}return e.next=3,q.addProgram({programName:i,program:n});case 3:t=e.sent,d((function(e){return[].concat(Object(f.a)(e),[t])})),c([]);case 6:case"end":return e.stop()}}),e)}))),[n]),Object(r.useEffect)(Object(p.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d,e.next=3,q.getPrograms();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),[]),Object(v.jsxs)("div",{className:"admin-panel-container",children:[Object(v.jsx)("h1",{children:"AdminPanel"}),Object(v.jsxs)("div",{className:"admin-panel",children:[Object(v.jsx)(M,{setProgram:c,program:n,isSubmitingProgram:O,ActiveProgram:S}),Object(v.jsx)(D,{handleSubmit:function(e){e.preventDefault(),x(!0),setTimeout((function(){x(!1)}),500)},programName:i,setProgramName:o,programs:j,handleSettingProgram:function(e){k(e)},handleDeleteProgram:function(e){var t=JSON.parse(JSON.stringify(j)),n=j.findIndex((function(t){return t._id===e._id}));q.deleteProgram(e),t.splice(n,1),d(t)}})]})]})};var Y={uploadSong:function(e){var t="https://api.cloudinary.com/v1_1/".concat("tamir","/video/upload"),n=new FormData;return e.target?n.append("file",e.target.files[0]):n.append("file",e),n.append("upload_preset","u1inrfbp"),fetch(t,{method:"POST",body:n,secure:!0}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))}};function K(){return(K=Object(p.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._id=J.a.makeId(),e.abrupt("return",I("room/add-song/".concat(n),{songObj:t,idx:n}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(p.a)(g.a.mark((function e(t){var n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id?I("room/".concat(t._id),t):F("room",t),e.next=3,n;case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z={query:function(e){var t=new URLSearchParams(e);return _("room?".concat(t))},getById:function(e){var t=new URLSearchParams;if(e){for(var n in e)e[n]&&t.set(n,e[n]);return _("room?".concat(t))}},save:function(e){return Q.apply(this,arguments)},remove:function(e){return A("room/".concat(e))},addNewSong:function(e,t){return K.apply(this,arguments)},getRoom:function(e){var t=new URLSearchParams;if(e){for(var n in e)e[n]&&t.set(n,e[n]);return _("room?".concat(t))}}},$=n(71),ee=n.n($),te=function(e){var t=e.song,n=e.idx,c=e.isDeleting,r=(e.handleDeletingSongs,e.idToDelete),a=e.setSongIdToDelete;return Object(v.jsxs)("div",{className:"song-preview",children:[c&&Object(v.jsx)("input",{type:"checkbox",onChange:function(){return function(){var e=r.includes(t._id);a(e?r.filter((function(e){return e!==t._id})):[].concat(Object(f.a)(r),[t._id]))}()}}),Object(v.jsxs)("h2",{children:[n+1," - ",t.name]})]})},ne=function(){return Object(v.jsxs)("svg",{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 476.912 476.912",xmlSpace:"preserve",className:"home-icon",children:[Object(v.jsx)("g",{children:Object(v.jsx)("g",{children:Object(v.jsx)("path",{d:"M461.776,209.408L249.568,4.52c-6.182-6.026-16.042-6.026-22.224,0L15.144,209.4c-3.124,3.015-4.888,7.17-4.888,11.512\r c0,8.837,7.164,16,16,16h28.2v224c0,8.837,7.163,16,16,16h112c8.837,0,16-7.163,16-16v-128h80v128c0,8.837,7.163,16,16,16h112\r c8.837,0,16-7.163,16-16v-224h28.2c4.338,0,8.489-1.761,11.504-4.88C468.301,225.678,468.129,215.549,461.776,209.408z\r M422.456,220.912c-8.837,0-16,7.163-16,16v224h-112v-128c0-8.837-7.163-16-16-16h-80c-8.837,0-16,7.163-16,16v128h-112v-224\r c0-8.837-7.163-16-16-16h-28.2l212.2-204.88l212.28,204.88H422.456z"})})}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{}),Object(v.jsx)("g",{})]})},ce=function(){return Object(v.jsx)("svg",{height:"512",viewBox:"0 0 24 24",width:"512",xmlns:"http://www.w3.org/2000/svg",className:"add-song-icon",children:Object(v.jsxs)("g",{children:[Object(v.jsx)("path",{d:"m2.5 12c0-5.24671 4.25329-9.5 9.5-9.5 5.2467 0 9.5 4.25329 9.5 9.5 0 1.1707-.2115 2.2908-.598 3.325-.0966.2587.0347.5467.2934.6434.2586.0966.5467-.0347.6434-.2934.4276-1.1445.6612-2.383.6612-3.675 0-5.79899-4.701-10.5-10.5-10.5-5.79899 0-10.5 4.70101-10.5 10.5 0 5.799 4.70101 10.5 10.5 10.5.5348 0 1.0605-.04 1.5744-.1173.273-.0411.4611-.2958.42-.5688-.041-.2731-.2957-.4612-.5688-.4201-.4647.0699-.9408.1062-1.4256.1062-5.24671 0-9.5-4.2533-9.5-9.5z"}),Object(v.jsx)("path",{d:"m16 18.5c-.2761 0-.5.2239-.5.5s.2239.5.5.5h1.5v1.5c0 .2761.2239.5.5.5s.5-.2239.5-.5v-1.5h1.5c.2761 0 .5-.2239.5-.5s-.2239-.5-.5-.5h-1.5v-1.5c0-.2761-.2239-.5-.5-.5s-.5.2239-.5.5v1.5z"}),Object(v.jsx)("path",{clipRule:"evenodd",d:"m10.2572 8.57125c-.1544-.09268-.34679-.0951-.50355-.00635-.15675.08875-.25365.25496-.25365.4351v6c0 .1801.0969.3463.25365.4351.15676.0888.34915.0863.50355-.0064l5-3c.1507-.0903.2428-.2531.2428-.4287s-.0921-.3384-.2428-.4287zm3.771 3.42875-3.5282 2.1169v-4.23381z"})]})})},re=function(e){var t=e.isDeleting;return Object(v.jsx)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:t?"remove-song-icon deleting":"remove-song-icon",children:Object(v.jsxs)("g",{children:[Object(v.jsx)("path",{d:"m12 2.5c-5.24671 0-9.5 4.25329-9.5 9.5 0 5.2467 4.25329 9.5 9.5 9.5.4848 0 .9609-.0363 1.4256-.1062.2731-.0411.5278.147.5688.4201.0411.273-.147.5277-.42.5688-.5139.0773-1.0396.1173-1.5744.1173-5.79899 0-10.5-4.701-10.5-10.5 0-5.79899 4.70101-10.5 10.5-10.5 5.799 0 10.5 4.70101 10.5 10.5 0 1.292-.2336 2.5305-.6612 3.675-.0967.2587-.3848.39-.6434.2934-.2587-.0967-.39-.3847-.2934-.6434.3865-1.0342.598-2.1543.598-3.325 0-5.24671-4.2533-9.5-9.5-9.5z"}),Object(v.jsx)("path",{d:"m21.5 19.5c0 .2761-.2239.5-.5.5h-4c-.2761 0-.5-.2239-.5-.5s.2239-.5.5-.5h4c.2761 0 .5.2239.5.5z"}),Object(v.jsx)("path",{d:"m10.2572 8.57125c-.1544-.09268-.34679-.0951-.50355-.00635-.15675.08875-.25365.25496-.25365.4351v6c0 .1801.0969.3463.25365.4351.15676.0888.34915.0863.50355-.0064l5-3c.1507-.0903.2428-.2531.2428-.4287s-.0921-.3384-.2428-.4287zm3.771 3.42875-3.5282 2.1169v-4.23381z"})]})})},ae=function(e){var t=Object(r.useState)(null),n=Object(h.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(0),i=Object(h.a)(s,2),o=i[0],u=i[1],l=Object(r.useState)([]),j=Object(h.a)(l,2),d=j[0],m=j[1],b=Object(r.useState)(null),f=Object(h.a)(b,2),x=f[0],w=f[1],y=Object(r.useState)(!1),S=Object(h.a)(y,2),k=S[0],N=S[1],C=Object(r.useState)(null),M=Object(h.a)(C,2),E=M[0],D=M[1],L=Object(r.useState)(null),T=Object(h.a)(L,2),V=T[0],_=T[1],F=Object(r.useState)(!1),I=Object(h.a)(F,2),A=I[0],B=I[1],R=Object(r.useState)([]),U=Object(h.a)(R,2),J=U[0],H=U[1],X=Object(r.useState)(!0),W=Object(h.a)(X,2),q=W[0],G=W[1],K=Object(r.useState)(!1),Q=Object(h.a)(K,2),$=Q[0],ae=Q[1],se=Object(r.useState)([{hours:10,minutes:0,seconds:0,action:"play"},{hours:14,minutes:0,seconds:0,action:"pause"},{hours:16,minutes:0,seconds:0,action:"play"},{hours:20,minutes:0,seconds:0,action:"pause"}]),ie=Object(h.a)(se,2),oe=ie[0],ue=(ie[1],Object(r.useRef)()),le=function(){var e=Object(p.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.next=3,Y.uploadSong(t);case 3:n=e.sent,_({name:n.original_filename,songUrl:n.secure_url}),B(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(e){var t=E.playlist.map((function(e){return e.songUrl}));return e?t.push(e):t},de=function(){if(d.length){var e=JSON.parse(JSON.stringify(E));d.forEach((function(t){var n=e.playlist.findIndex((function(e){return t===e._id}));e.playlist.splice(n,1)})),D(e),m(""),Z.save(e)}},me=function(){var e=function e(t){switch(t){case"play":G(!0),console.log("playing");break;case"pause":G(!1),console.log("stopping")}setTimeout((function(n){e(t)}),864e5)};oe.forEach((function(t){var n=function(e,t,n){var c=new Date;return c.setHours(e),c.setMinutes(t),c.setSeconds(n),c}(t.hours,t.minutes,t.seconds)-new Date;n<0&&(n+=864e5),setTimeout((function(n){e(t.action)}),n)}))};return Object(r.useEffect)(Object(p.a)(g.a.mark((function t(){var n,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(null===e||void 0===e||null===(n=e.match)||void 0===n||null===(c=n.params)||void 0===c?void 0:c.id),t.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:me();case 4:case"end":return t.stop()}}),t)}))),[]),Object(r.useEffect)((function(){if(V){var e=JSON.parse(JSON.stringify(E));e.playlist.push(V),D(e),Z.addNewSong(V,c),H(je(V.songUrl))}}),[V]),Object(r.useEffect)(Object(p.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=6;break}return e.t0=D,e.next=4,Z.getRoom({roomIdx:c});case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)}))),[c]),Object(r.useEffect)((function(){return P.setup(),E&&(H(je()),P.on("change volume ".concat(c),(function(e){var t=e.newValue;w(t/100)})),P.on("new play status ".concat(c),(function(e){var t=e.isLocalPlaying;G(t)})),P.on("check for volume status in room ".concat(c),(function(){N(!0),setTimeout((function(){N(!1)}),500)}))),function(){c&&(P.off("change volume ".concat(c)),P.off("new play status ".concat(c)),P.off("check for volume status in room ".concat(c))),P.terminate()}}),[E]),Object(r.useEffect)((function(){k&&x&&P.emit("Active",{roomIdx:c,volume:x})}),[k]),E?Object(v.jsxs)("div",{className:"music-player",children:[Object(v.jsxs)("div",{className:"music-player-header",children:[Object(v.jsx)("h2",{children:c}),Object(v.jsx)("h2",{children:"Room Name"}),J.length&&Object(v.jsx)("div",{className:"player-wrapper",children:Object(v.jsx)(ee.a,{playing:q,controls:!0,url:J[o],className:"react-player",volume:x,onEnded:function(){G(!1);var e=o+1;e%=J.length,u(e),G(!0)},height:"10%",ref:ue})}),Object(v.jsx)(O.a,{to:"/",children:Object(v.jsx)(ne,{})})]}),A?Object(v.jsx)(z,{}):Object(v.jsxs)("div",{className:"song-list",children:[Object(v.jsx)("span",{className:"songs",children:E&&E.playlist.map((function(e,t){return Object(v.jsx)(te,{song:e,idx:t,isDeleting:$,handleDeletingSongs:de,idToDelete:d,setSongIdToDelete:m},t)}))}),Object(v.jsxs)("span",{className:"icons",children:[Object(v.jsx)("i",{children:Object(v.jsxs)("label",{children:[Object(v.jsx)(ce,{}),Object(v.jsx)("input",{type:"file",onChange:function(e){return le(e)},hidden:!0})]})}),Object(v.jsx)("i",{onClick:function(){ae(!$),de()},children:Object(v.jsx)(re,{isDeleting:$})})]})]})]}):Object(v.jsx)(z,{})},se=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"router-page",children:Object(v.jsx)("main",{children:Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/",exact:!0,component:G}),Object(v.jsx)(o.a,{path:"/player/:id",exact:!0,component:ae})]})})})}}]),n}(a.a.Component),ie=Object(u.a)();var oe=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(o.b,{history:ie,children:Object(v.jsx)(se,{})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,151)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(oe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),ue()},29:function(e,t){e.exports={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<e;c++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}}},78:function(e,t,n){},79:function(e,t,n){}},[[150,1,2]]]);
//# sourceMappingURL=main.eae598ac.chunk.js.map